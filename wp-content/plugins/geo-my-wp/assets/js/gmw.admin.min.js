var GMW_Admin={init:function(){jQuery().chosen&&jQuery(".gmw-admin-page select:not( .gmw-smartbox-not )").chosen({width:"100%"}),GMW_Admin.tabs_switcher_init(),GMW_Admin.multiple_address_fields_selector(),jQuery("#gmw-edit-form-page, .geo-my-wp_page_gmw-settings").length&&(GMW_Admin.form_editor_init(),GMW_Admin.limit_description())},tabs_switcher_init:function(){jQuery(".gmw-nav-tab").click(function(e){e.preventDefault(),jQuery(".gmw-tab-panel").hide(),jQuery(".gmw-nav-tab").removeClass("active"),jQuery(this).addClass("active"),clickedTab=jQuery(this).data("name"),jQuery(".gmw-tab-panel."+clickedTab).show(),GMW.set_cookie("gmw_admin_tab",clickedTab,1)}),lastTab=GMW.get_cookie("gmw_admin_tab"),"undefined"!=lastTab&&jQuery("#"+lastTab).length?jQuery(".gmw-tabs-wrapper").find('a[data-name="'+lastTab+'"]').click():jQuery(".gmw-tabs-wrapper li a:first").click()},multiple_address_fields_selector:function(){jQuery('.gmw-admin-page [data="multiselect_address_fields"]').on("change",function(e,t){var s=jQuery(this);t.selected&&("address"==t.selected||"disabled"==t.selected?s.children("option").each(function(){jQuery(this).val()!=t.selected&&jQuery(this).is(":selected")&&jQuery(this).attr("selected",!1)}):s.children("option").each(function(){("address"==jQuery(this).val()||"disabled"==jQuery(this).val())&&jQuery(this).is(":selected")&&jQuery(this).attr("selected",!1)}),s.trigger("chosen:updated"))})},form_editor_init:function(){function e(e){"disabled"==e?jQuery(".fields-group-locator_button").find(".single-option:not( .option-locator )").slideUp("fast"):(jQuery(".fields-group-locator_button").find(".single-option:not( .option-locator )").slideUp("fast"),jQuery(".fields-group-locator_button").find(".option-locator_submit, .option-locator_"+e).slideDown("fast"))}jQuery(".form-editor-close").click(function(){GMW.set_cookie("gmw_admin_tab","",1)}),jQuery(".gmw-options-box ul.options-tabs li a").on("click",function(e){e.preventDefault(),thisTab=jQuery(this),tabName=jQuery(this).attr("class").replace("tab-anchor ",""),thisTab.closest("ul.options-tabs").find("li").removeClass("active"),thisTab.closest("li").addClass("active"),thisTab.closest("div.gmw-options-box").find("ul.options-tabs-content li.tab-content").hide(),thisTab.closest("div.gmw-options-box").find("ul.options-tabs-content li."+tabName).show()}),e(jQuery("#setting-search_form-locator").val()),jQuery("#setting-search_form-locator").change(function(){e(jQuery(this).val())});var t=jQuery("#gmw-edit-form-page #setting-search_form-post_types option:selected").length;if(1==t){var s=jQuery("#gmw-edit-form-page #setting-search_form-post_types option:selected").val();jQuery("#post-type-"+s+"-taxonomies-wrapper").slideDown("fast")}else t>1&&(jQuery(".posts-types-settings-wrapper").slideDown("fase"),jQuery("#post-types-no-taxonomies-message").slideDown("fast"));jQuery("#gmw-edit-form-page #setting-search_form-post_types").change(function(){var e=jQuery(this).find("option:selected");0==e.length?(jQuery(".post-type-taxonomies-wrapper").slideUp("fast"),jQuery("#post-types-no-taxonomies-message").slideUp("fast"),jQuery("#post-types-select-taxonomies-message").slideDown("fast"),jQuery(".posts-types-settings-wrapper").slideUp("fase")):1==e.length?(e=e.val(),jQuery("#post-types-no-taxonomies-message").slideUp("fast"),jQuery("#post-types-select-taxonomies-message").slideUp("fast"),jQuery("#post-type-"+e+"-taxonomies-wrapper").slideDown("fast"),jQuery(".posts-types-settings-wrapper").slideUp("fase")):(jQuery("#post-types-select-taxonomies-message").slideUp("fast"),jQuery(".post-type-taxonomies-wrapper").slideUp(),jQuery("#post-types-no-taxonomies-message").slideDown("fast"),jQuery(".posts-types-settings-wrapper").slideDown("fase"))}),jQuery(".gmw-edit-form").on("submit",function(e){jQuery(this).data("ajax_enabled")&&(e.preventDefault(),GMW_Admin.update_form(jQuery(this)))})},update_form:function(e){jQuery('.gmw-edit-form input[type="submit"]').prop("disabled",!0),jQuery(".gmw-edit-form #gmw-form-cover").fadeToggle(),jQuery.ajax({type:"POST",url:gmwAjaxUrl,dataType:"json",data:{action:"gmw_update_admin_form",form_values:e.serialize(),security:e.data("nonce")},success:function(e){e?(jQuery('.gmw-edit-form input[type="submit"]').prop("disabled",!1),jQuery(".gmw-edit-form #gmw-form-cover").fadeToggle(),jQuery(".gmw-edit-form #form-update-messages p.success").fadeToggle(function(){setTimeout(function(){jQuery(".gmw-edit-form #form-update-messages p.success").fadeToggle()},5e3)})):this.update_failed()}}).fail(function(e,t,s){window.console&&window.console.log&&(console.log(t+": "+s),e.responseText&&console.log(e.responseText)),jQuery('.gmw-edit-form input[type="submit"]').prop("disabled",!1),jQuery(".gmw-edit-form #gmw-form-cover").fadeToggle(),jQuery(".gmw-edit-form #form-update-messages p.failed").fadeToggle(function(){setTimeout(function(){jQuery(".gmw-edit-form #form-update-messages p.failed").fadeToggle()},5e3)})})},limit_description:function(){jQuery(".gmw-nav-tab").click(function(){var e=jQuery(this).data("name");jQuery(".gmw-tab-panel."+e+" .gmw-form-feature-desc-content .description:not( .long )").each(function(){var e=jQuery(this).outerHeight();e>80&&(jQuery(this).addClass("long"),jQuery(this).after('<span class="read-more"></span>'))})}),jQuery(".gmw-form-feature-desc-content .description").each(function(){var e=jQuery(this).outerHeight();e>80&&(jQuery(this).addClass("long"),jQuery(this).after('<span class="read-more"></span>'))}),jQuery(document).on("click",".gmw-form-feature-desc-content .read-more",function(){jQuery(this).toggleClass("open").closest("div").find("em").toggleClass("long")})}};jQuery(document).ready(function(e){GMW_Admin.init(e)});