var GMW={options:gmwSettings,hooks:{action:{},filter:{}},map_elements:{},navigator_timeout:1e4,autocomplete_fields:void 0!==typeof gmwAutocompleteFields?{}:gmwAutocompleteFields,navigator_error_messages:{1:"User denied the request for Geolocation.",2:"Location information is unavailable.",3:"The request to get user location timed out.",4:"An unknown error occurred"},auto_locator:{status:!1,type:!1,callback:!1},locator_button:{status:!1,element:!1,id:!1,loader:!1,submit:!1},form_submission:{status:!1,form:!1,id:!1,submit:!1},init:function(){GMW.add_action("gmw_init"),jQuery("div.gmw-map-wrapper.gmw-expanded-map").length&&jQuery("body, html").addClass("gmw-scroll-disabled"),jQuery("div.gmw-form-wrapper, ul.gmw-form-wrapper").length&&GMW.form_functions(),navigator.geolocation&&1==GMW.options.general_settings.auto_locate&&1!=GMW.get_cookie("gmw_autolocate")&&(GMW.set_cookie("gmw_autolocate",1,1),GMW.auto_locator("page_locator",GMW.page_locator_success,!1)),jQuery("input.gmw-address-autocomplete").each(function(){jQuery(this).is("[id]")&&GMW.address_autocomplete(jQuery(this).attr("id"),jQuery(this).data())}),"undefined"!=typeof jQuery.ui&&jQuery.ui.draggable&&GMW.draggable_element(),GMW.toggle_element(),GMW.rangeslider(),GMW.date_picker()},add_action:function(e,o,t,a){GMW.add_hook("action",e,o,t,a)},add_filter:function(e,o,t,a){GMW.add_hook("filter",e,o,t,a)},do_action:function(e){GMW.do_hook("action",e,arguments)},apply_filters:function(e){return GMW.do_hook("filter",e,arguments)},remove_action:function(e,o){GMW.remove_hook("action",e,o)},remove_filter:function(e,o,t){GMW.remove_hook("filter",e,o,t)},add_hook:function(e,o,t,a,s){void 0==GMW.hooks[e][o]&&(GMW.hooks[e][o]=[]);var n=GMW.hooks[e][o];void 0==s&&(s=o+"_"+n.length),void 0==a&&(a=10),GMW.hooks[e][o].push({tag:s,callable:t,priority:a})},do_hook:function(e,o,t){if(t=Array.prototype.slice.call(t,1),void 0!=GMW.hooks[e][o]){var a,s=GMW.hooks[e][o];s.sort(function(e,o){return e.priority-o.priority});for(var n=0;n<s.length;n++)a=s[n].callable,"function"!=typeof a&&(a=window[a]),"action"==e?a.apply(null,t):t[0]=a.apply(null,t)}return"filter"==e?t[0]:void 0},remove_hook:function(e,o,t,a){if(void 0!=GMW.hooks[e][o])for(var s=GMW.hooks[e][o],n=s.length-1;n>=0;n--)void 0!=a&&a!=s[n].tag||void 0!=t&&t!=s[n].priority||s.splice(n,1)},set_cookie:function(e,o,t){var a=new Date;a.setTime(a.getTime()+24*t*60*60*1e3);var s=escape(encodeURIComponent(o))+(null==t?"":"; expires="+a.toUTCString());document.cookie=e+"="+s+"; path=/"},get_cookie:function(e){var o=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return o?decodeURIComponent(o[2]):null},delete_cookie:function(e){document.cookie=encodeURIComponent(name_name)+"=deleted; expires="+new Date(0).toUTCString()},navigator:function(e,o){function t(t){GMW.geocoder([t.coords.latitude,t.coords.longitude],e,o)}function a(e){return o(GMW.navigator_error_messages[e.code])}return navigator.geolocation?void navigator.geolocation.getCurrentPosition(t,a,{timeout:GMW.navigator_timeout}):o("Sorry! Geolocation is not supported by this browser.")},geocoder:function(e,o,t){countryCode=void 0!=GMW.options.general_settings.country_code?GMW.options.general_settings.country_code:"us","object"==typeof e?data={latLng:new google.maps.LatLng(e[0],e[1]),region:countryCode}:data={address:e,region:countryCode},geocoder=new google.maps.Geocoder,geocoder.geocode(data,function(e,a){return a==google.maps.GeocoderStatus.OK?void 0!=o?o(e):GMW.geocoder_success(e):void 0!=t?t(a):GMW.geocoder_failed(a)})},geocoder_success:function(){},geocoder_failed:function(e){alert("We could not find the address you entered for the following reason: "+e)},address_autocomplete:function(e,o){var t=document.getElementById(e);if(null!=t){var a={};"undefined"!=typeof o.autocomplete_countries&&(a.componentRestrictions={country:o.autocomplete_countries.split(",")}),"undefined"!=typeof o.autocomplete_types&&(a.types=[o.autocomplete_types]),a=GMW.apply_filters("gmw_address_autocomplete_options",a,e,t,GMW);var s=new google.maps.places.Autocomplete(t,a);google.maps.event.addListener(s,"place_changed",function(){var o=s.getPlace();if(GMW.do_action("gmw_address_autocomplete_place_changed",o,s,e,t,a),o.geometry){var n=t.closest("form");1==o.address_components.length&&"country"==o.address_components[0].types[0]?n.find(".gmw-country").val(o.address_components[0].short_name).prop("disabled",!1):2==o.address_components.length&&"administrative_area_level_1"==o.address_components[0].types[0]&&(n.find(".gmw-state").val(o.address_components[0].long_name).prop("disabled",!1),n.find(".gmw-country").val(o.address_components[1].short_name).prop("disabled",!1)),n.find(".gmw-lat").val(o.geometry.location.lat().toFixed(6)),n.find(".gmw-lng").val(o.geometry.location.lng().toFixed(6))}})}},save_location_fields:function(e){var o=jQuery("form#gmw-current-location-hidden-form"),t=e[0].geometry.location.lat().toFixed(6),a=e[0].geometry.location.lng().toFixed(6);address_fields={street_number:"",street_name:"",street:"",premise:"",neighborhood:"",city:"",region_code:"",region_name:"",country:"",postcode:"",country_code:"",country_name:"",address:e[0].formatted_address,formatted_address:e[0].formatted_address,lat:t,lng:a},GMW.set_cookie("gmw_ul_lat",t,7),o.find("input#gmw_cl_lat").val(t),GMW.set_cookie("gmw_ul_lng",a,7),o.find("input#gmw_cl_lng").val(a),GMW.set_cookie("gmw_ul_address",e[0].formatted_address,7),o.find("input#gmw_cl_address").val(e[0].formatted_address),GMW.set_cookie("gmw_ul_formatted_address",e[0].formatted_address,7),o.find("input#gmw_cl_formatted_address").val(e[0].formatted_address),address=e[0].address_components,GMW.do_action("gmw_save_location_fields",e);for(x in address)"street_number"==address[x].types&&void 0!=address[x].long_name&&(address_fields.street_number=address[x].long_name,o.find("input#gmw_cl_street_number").val(address_fields.street_number)),"route"==address[x].types&&void 0!=address[x].long_name&&(address_fields.street_name=address[x].long_name,o.find("input#gmw_cl_street_name").val(address_fields.street_name),""!=address_fields.street_number?address_fields.street=address_fields.street_number+" "+address_fields.street_name:address_fields.street=address_fields.street_name,GMW.set_cookie("gmw_ul_street",address_fields.street,7),o.find("input#gmw_cl_street").val(address_fields.street)),"subpremise"==address[x].types&&void 0!=address[x].long_name&&(address_fields.premise=address[x].long_name,o.find("input#gmw_cl_premise").val(address[x].long_name)),"neighborhood,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.neighborhood=address[x].long_name,o.find("input#gmw_cl_neighborhood").val(address[x].long_name)),"locality,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.city=address[x].long_name,GMW.set_cookie("gmw_ul_city",address[x].long_name,7),o.find("input#gmw_cl_city").val(address[x].long_name)),"administrative_area_level_1,political"==address[x].types&&(address_fields.region_name=address[x].long_name,address_fields.region_code=address[x].short_name,GMW.set_cookie("gmw_ul_region_name",address[x].long_name,7),GMW.set_cookie("gmw_ul_region_code",address[x].short_name,7),o.find("input#gmw_cl_region_code").val(address[x].short_name),o.find("input#gmw_cl_region_name").val(address[x].long_name)),"administrative_area_level_2,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.county=address[x].long_name,o.find("input#gmw_cl_county").val(address[x].long_name)),"postal_code"==address[x].types&&void 0!=address[x].long_name&&(address_fields.postcode=address[x].long_name,GMW.set_cookie("gmw_ul_postcode",address[x].short_name,7),o.find("input#gmw_cl_postcode").val(address[x].long_name)),"country,political"==address[x].types&&(address_fields.country_name=address[x].long_name,address_fields.country_code=address[x].short_name,GMW.set_cookie("gmw_ul_country_name",address[x].long_name,7),GMW.set_cookie("gmw_ul_country_code",address[x].short_name,7),o.find("input#gmw_cl_country_code").val(address[x].short_name),o.find("input#gmw_cl_country_name").val(address[x].long_name)),GMW.do_action("gmw_save_location_field",address[x],e);return address_fields},auto_locator:function(e,o,t){GMW.auto_locator.status=!0,GMW.auto_locator.type=e,GMW.auto_locator.success=o,GMW.auto_locator.failed=t,GMW.navigator(GMW.auto_locator_success,GMW.auto_locator_failed)},auto_locator_success:function(e){address_fields=GMW.save_location_fields(e),0!=GMW.auto_locator.success?GMW.auto_locator.success(address_fields,e):(GMW.auto_locator.status=!1,GMW.auto_locator.type=!1,GMW.auto_locator.success=!1,GMW.auto_locator.failed=!1)},auto_locator_failed:function(e){0!=GMW.auto_locator.failed?GMW.auto_locator.failed(e):(alert(e),GMW.auto_locator.status=!1,GMW.auto_locator.type=!1,GMW.auto_locator.success=!1,GMW.auto_locator.failed=!1)},page_locator_success:function(e,o){GMW.auto_locator.status=!1,GMW.auto_locator.callback=!1,GMW.auto_locator.type=!1,setTimeout(function(){jQuery("form#gmw-current-location-form").submit()},500)},form_functions:function(){GMW.enable_smartbox(),jQuery("form").find("input.gmw-address").keyup(function(e){if(13!=e.which){var o=jQuery(this).closest("form");o.find("input.gmw-lat, input.gmw-lng").val(""),o.find("input.gmw-state, input.gmw-country").val("").prop("disabled",!0)}}),jQuery("form").find(".gmw-locator-button").click(function(){GMW.locator_button(jQuery(this),jQuery(this).closest("form"))}),jQuery("form.gmw-form").submit(function(e){GMW.form_submission(jQuery(this),e)})},enable_smartbox:function(){jQuery().chosen?jQuery("form").find("select.gmw-smartbox").chosen({width:"100%"}):jQuery().select2&&jQuery("form").find("select.gmw-smartbox").select2()},form_submission:function(e,o){if(GMW.form_submission.status=!0,GMW.form_submission.form=e,GMW.form_submission.id=GMW.form_submission.form.find(".gmw-form-id").val(),1==GMW.form_submission.submit)return!0;var e=e,t=e.find("input.gmw-address"),a="";return o.preventDefault(),e.find("input.gmw-paged").val("1"),a=t.hasClass("gmw-full-address")?e.find("input.gmw-address").val():t.map(function(){return jQuery(this).val()}).get().join(" "),jQuery.trim(a).length?1!=GMW.options.general_settings.js_geocode?(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1):""!=e.find("input.gmw-lat").val()&&""!=e.find("input.gmw-lng").val()?(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1):void GMW.geocoder(a,GMW.form_geocoder_success,GMW.geocoder_failed):t.hasClass("mandatory")?(t.hasClass("gmw-no-address-error")||(t.addClass("gmw-no-address-error").on("focus keypress",function(){jQuery(this).removeClass("gmw-no-address-error").off("focus keypress")}),setTimeout(function(){t.removeClass("gmw-no-address-error").off("focus keypress")},4e3)),!1):(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1)},form_geocoder_success:function(e){var o=GMW.form_submission.form,t=e[0].address_components;return 1==t.length&&"country"==t[0].types[0]?o.find(".gmw-country").val(t[0].short_name).prop("disabled",!1):2==t.length&&"administrative_area_level_1"==t[0].types[0]&&(o.find(".gmw-state").val(t[0].long_name).prop("disabled",!1),o.find(".gmw-country").val(t[1].short_name).prop("disabled",!1)),o.find(".gmw-lat").val(e[0].geometry.location.lat().toFixed(6)),o.find(".gmw-lng").val(e[0].geometry.location.lng().toFixed(6)),setTimeout(function(){GMW.form_submission.submit=!0,GMW.form_submission.form.submit()},300),!1},locator_button:function(e,o){if("undefined"==typeof o)var o=e.closest("form");else var o=o;jQuery("form.gmw-form").find('input[type="text"], .gmw-submit').attr("disabled","disabled"),GMW.locator_button.status=!0,GMW.locator_button.form=o,GMW.locator_button.element=e,GMW.locator_button.form_id=e.data("form_id"),GMW.locator_button.loader=e.next(),GMW.locator_button.submit=1==e.attr("data-locator_submit")?!0:!1,o.find("input.gmw-lat, input.gmw-lng").val(""),o.find("input.gmw-state, input.gmw-country").val("").prop("disabled",!0),e.hasClass("inside")?e.addClass("animate-spin"):e.hasClass("text")?GMW.locator_button.loader.fadeIn("fast"):e.fadeOut("fast",function(){GMW.locator_button.loader.fadeIn("fast")}),setTimeout(function(){GMW.auto_locator("locator_button",GMW.locator_button_success,GMW.locator_button_failed)},500)},locator_button_success:function(e,o){var t=GMW.locator_button.form,a=t.find("input.gmw-address");jQuery("form.gmw-form").find('input[type="text"], .gmw-submit').removeAttr("disabled"),t.find("input.gmw-lat").val(o[0].geometry.location.lat().toFixed(6)),t.find("input.gmw-lng").val(o[0].geometry.location.lng().toFixed(6)),a.hasClass("gmw-full-address")?a.val(e.formatted_address):(t.find(".gmw-address.street").val(e.street),t.find(".gmw-address.city").val(e.city),t.find(".gmw-address.state").val(e.region_name),t.find(".gmw-address.zipcode").val(e.postcode),t.find(".gmw-address.country").val(e.country_code)),GMW.locator_button.submit?setTimeout(function(){t.find(".gmw-submit").click(),GMW.locator_button_done()},500):GMW.locator_button_done()},locator_button_failed:function(e){alert("Geocoder failed due to: "+e),GMW.locator_button_done()},locator_button_done:function(){var e=GMW.locator_button.element;jQuery("form.gmw-form").find('input[type="text"], .gmw-submit').removeAttr("disabled"),e.hasClass("inside")?e.removeClass("animate-spin"):GMW.locator_button.loader.fadeOut("fast",function(){e.fadeIn("fast")}),setTimeout(function(){GMW.locator_button.status=!1,GMW.locator_button.element=!1,GMW.locator_button.form_id=!1,GMW.locator_button.loader=!1,GMW.locator_button.submit=!1},500)},rangeslider:function(){jQuery("form").find("input.gmw-range-slider").on("input change",function(){jQuery(this).next("span").find("output").html(jQuery(this).val())})},date_picker:function(){var e=jQuery(".gmw-date-field"),o=jQuery(".gmw-time-field");e.length>0&&"undefined"!=typeof jQuery.fn.pickadate&&e.each(function(){var e=jQuery(this).data("date_type");jQuery(this).pickadate({format:e||"yyyy/mm/dd"})}),o.length>0&&"undefined"!=typeof jQuery.fn.pickatime&&o.each(function(){jQuery(this).pickatime({interval:1})})},draggable_element:function(){jQuery(".gmw-draggable.remote-toggle").each(function(){var e=jQuery(this).data(),o=jQuery(e.handle);o.addClass("gmw-draggable").attr("data-draggable",e.draggable).attr("data-containment",e.containment)}),jQuery(document).on("mouseenter",".gmw-draggable",function(e){if(!jQuery(this).hasClass("enabled")){jQuery(this).addClass("enabled");var o=jQuery(this).data();"global_map"==o.draggable&&(o.draggable=jQuery(this).closest(".gmw-form-wrapper"),o.containment=jQuery(this).closest(".gmw-global-map-wrapper")),jQuery(o.draggable).draggable({containment:o.containment,handle:jQuery(this)})}})},toggle_element:function(){jQuery(document).on("click",".gmw-element-toggle-button",function(e){var o=jQuery(this),t=jQuery(this).data(),a=jQuery(t.target),s={};o.toggleClass(t.show_icon).toggleClass(t.hide_icon),"expand"==o.attr("data-state")?(s[t.animation]=t.close_length,o.attr("data-state","collapse"),a.attr("data-state","collapse")):(s[t.animation]=t.open_length,o.attr("data-state","expand"),a.attr("data-state","expand")),"height"==t.animation||"width"==t.animation?a.animate(s,t.duration):a.addClass("gmw-toggle-element").css(t.animation,s[t.animation])})}};jQuery(document).ready(function(e){0==gmwIsAdmin&&GMW.init()});