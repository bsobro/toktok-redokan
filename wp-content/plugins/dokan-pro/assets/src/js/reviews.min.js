!function(a){var b={init:function(){a("#dokan-comments-table").on("click",".dokan-cmt-action",this.setCommentStatus),a("#dokan-comments-table").on("click","button.dokan-cmt-close-form",this.closeForm),a("#dokan-comments-table").on("click","button.dokan-cmt-submit-form",this.submitForm),a("#dokan-comments-table").on("click",".dokan-cmt-edit",this.populateForm),a(".dokan-check-all").on("click",this.toggleCheckbox)},toggleCheckbox:function(){a(".dokan-check-col").prop("checked",a(this).prop("checked"))},setCommentStatus:function(b){b.preventDefault();var c=a(this),d=c.data("comment_id"),e=c.data("cmt_status"),f=c.data("page_status"),g=c.data("post_type"),h=c.data("curr_page"),i=c.closest("tr"),j={action:"dokan_comment_status",comment_id:d,comment_status:e,page_status:f,post_type:g,curr_page:h,nonce:dokan.nonce};a.post(dokan.ajaxurl,j,function(b){1===f&&(1===e||0===e)?i.fadeOut(function(){i.replaceWith(b.data.content).fadeIn()}):i.fadeOut(function(){a(this).remove()}),null==b.data.pending&&(b.data.pending=0),null==b.data.spam&&(b.data.spam=0),null==b.data.trash&&(b.data.trash=0),a(".comments-menu-pending").text(b.data.pending),a(".comments-menu-spam").text(b.data.spam),a(".comments-menu-trash").text(b.data.trash)})},populateForm:function(b){b.preventDefault();var c=a(this).closest("tr");if(c.next().hasClass("dokan-comment-edit-row"))return void c.next().remove();var d=a("#dokan-edit-comment-row").html(),e={author:c.find(".dokan-cmt-hid-author").text(),email:c.find(".dokan-cmt-hid-email").text(),url:c.find(".dokan-cmt-hid-url").text(),body:c.find(".dokan-cmt-hid-body").text(),id:c.find(".dokan-cmt-hid-id").text(),status:c.find(".dokan-cmt-hid-status").text()};c.after(_.template(d,e))},closeForm:function(b){b.preventDefault(),a(this).closest("tr.dokan-comment-edit-row").remove()},submitForm:function(b){b.preventDefault();var c=a(this),d=c.closest("tr.dokan-comment-edit-row"),e={action:"dokan_update_comment",comment_id:d.find("input.dokan-cmt-id").val(),content:d.find("textarea.dokan-cmt-body").val(),author:d.find("input.dokan-cmt-author").val(),email:d.find("input.dokan-cmt-author-email").val(),url:d.find("input.dokan-cmt-author-url").val(),status:d.find("input.dokan-cmt-status").val(),nonce:dokan.nonce,post_type:d.find("input.dokan-cmt-post-type").val()};a.post(dokan.ajaxurl,e,function(a){a.success===!0?(d.prev().replaceWith(a.data),d.remove()):alert(a.data)})}};a(function(){b.init()})}(jQuery);